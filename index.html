<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Pre-Order & Dealer Exchange Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Import map removed: rely entirely on Vite-bundled dependencies to avoid module MIME issues -->
  </head>
  <body class="bg-slate-100 text-slate-800">
    <div id="root"></div>
    <script>
      // One-time cleanup of legacy service workers
      // This runs once to clear any stale service worker registrations
      // that might be causing cache issues
      (function () {
        var SW_CLEANUP_KEY = "sw_cleanup_v1_done";
        if (
          "serviceWorker" in navigator &&
          !localStorage.getItem(SW_CLEANUP_KEY)
        ) {
          navigator.serviceWorker
            .getRegistrations()
            .then(function (registrations) {
              if (registrations.length > 0) {
                console.log(
                  "Performing one-time cleanup of " +
                    registrations.length +
                    " service worker(s)"
                );
                registrations.forEach(function (registration) {
                  registration.unregister().then(function () {
                    console.log(
                      "Unregistered legacy service worker:",
                      registration.scope
                    );
                  });
                });
              }
              localStorage.setItem(SW_CLEANUP_KEY, "true");
            });
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
